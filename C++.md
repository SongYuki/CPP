# C++

标签： C++ Primer

---

新版标准中引入了无序容器，以弥补原版标准中对hash容器的缺漏；新版标准支持移动构造函数和移动赋值运算符，以减小特定场景下对象拷贝的性能开销。新版标准不仅在语法上增加大量特性，而且在标准库里也引入大量设施，使得标准库对于C++语言的重要性远超从前。

“编译器会如何如何”，学习一个语言的境界是把自己想象成编译器，这种要求对于一般的程序设计语言可能太高了，但是对于学习C和C++语言是最理想的方法。
像编译器一样来思考和理解C++语言，如果暂时做不到，也不要紧，当有了一定的编写程序经验以后，在揣摩编译器行为的过程中可逐渐掌握C++语法特性。

C++标准库本身就是C++语法的最佳样例，其中包含不少C++高级特性的指导性用法。有些C++语言特性（比如虚拟继承），只在标准库中看到过实用做法。

在实践中，不必全面使用C++语言的各种特性，而应根据工程项目的实际情况，适当取舍（譬如动态类型信息，虚拟继承，异常等特性的使用很值得商榷）。通常只鼓励使用C++语言的一个子集就够了，一个值得学习和参考的例子是Google发布的Google C++ Style Guide。
尽管在工程中只使用C++的子集，但全面地学习C++语言仍然是必要的，毕竟C++语言是一个整体，并且C++标准库自身全面地使用了C++语言的各种特性。

一种优秀的编程语言，一定要对于计算这件事情实现一个完整和自洽的抽象。
十几年来编程语言领域的竞争，除却实现质量之外，基本上是在比拼抽象的设计。C语言之所以四十年长盛不衰，根本在于它对于现代计算机提供了一个底层的高级抽象；凡是比它低的抽象都过于简陋，凡是比它高的抽象都可以用C语言构造出来。
**C++成功的根本原因，恰恰是因为它虽然试图提供一些高级的抽象机制，但是其根基与C在同一层面。正因为如此，每当你需要走下去直接与硬件对话时，C++成为C之外唯一有效的选择。**

C++之所以脱离C而存在，还是因为其强大的抽象能力。Bjarne Stroustrup曾经总结说，C++同时支持四种不同的编程风格：**C风格，基于对象，面向对象和泛型**。事实上，把微软的COM也算进来的话，还可以加上一种**基于组件**的风格。
**这么多风格共存于一种语言，就是其强大抽象机制的证明**。

C++11以前，C++的抽象可以说是存在若干缺陷，其中最严重的是缺少自动内存管理和对象级别的消息发送机制。C++有自己的一套思维方式，比如容器，算法，作为概念抽象的对象等，很大程度上这套思维方式确实是合乎直觉的。只有到了C++11这一代，C++语言的高级抽象才基本完备，这样一种风格才可能真正落实。因此可以说C++11对于C++98而言，不是一次简单的升级，而是一次本质的跃升。

学习新的C++风格，并不是轻而易举的事情。即便对于以前已经精通C++的人来说，熟练掌握rvalue reference,move语义，了解unique_ptr,shared_ptr和weak_ptr的完整用法，明智地使用function/bind和lambda机制，学习C++ Concurrency的新技术，都绝非一朝一夕之功。

每一个具体的技术领域，只需要读四五本书就够了。《C++ Primer》《C++标准程序库》《Effective C++ -- Scott Meyers》《C++ Concurrency in Action --Anthony Williams》《Linux多线程服务端编程--陈硕》

Q:C++为何具有如此强大的生命力？
A：首先，和它背靠C语言这种“标准通用汇编”是分不开的，C++是作为一种“高级的C”而存在的。它始终可以看作是一种C语言的简写法，任何一句C++都有着深刻的C语言背景，可以直接落实为C语言，进而落实为任何一种计算机最底层的机器码。**这一点，是任何解释型语言都做不到的，因而在效率上它们无法和C++比拼**。另一方面，C++有着强大的抽象能力，它以奇妙的方式融合着五种编程泛型(paradigm)，**即面向过程，基于对象，面向对象，泛型和函数式**。在将所有泛型的有点提炼并发挥到极致的同时，又不拘泥于其中的任何一种。C++语言是彻底的拿来主义和实用主义，因而它不会在“是否应该根据单根结构以保持面向对象的纯洁性”这样的问题上纠缠不清，它只会考察每一种语言特性将落实为怎样的编译结果，哪种编译结果符合“不为用不到的特性付出成本”，“与现存代码可以兼容”等若干简明的规则，这种语言特性就按照哪种方式来定义和实现。

C++语言不是某个公司的产品，它的设计和标准化是由一个独立工作的委员会进行的，人们没有必要担心有一天C++会被某个公司控制起来，并为使用它而付出高昂的商业成本。C++语言可以有各种各样的商业编译器或专有领域编译器，但是由开源社区积极维护的免费编译器，始终都唾手可得。这一切，加上C++与时俱进的实现更新，配套完善的标准跟进，都使得C++语言生命力长盛不衰。


C++语言标准文档，作为语言标准，主要作用是给出无二义性的语言特性定义，为编译器的实现提供技术指导，因而它的主体必然是高度形式化的，它提供的例子也是服务于阐明语言特性的技术目标这个核心目标，往往又短又难懂，并且很难从中了解到语言特性应该如何运用。